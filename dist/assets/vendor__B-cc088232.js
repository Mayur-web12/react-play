function createBroadcast(t){var i={},f=1,r=t;function e(){return r}function n(l){r=l;for(var s=Object.keys(i),m=0,h=s.length;m<h;m++)i[s[m]]&&i[s[m]](l)}function c(l){if(typeof l!="function")throw new Error("listener must be a function.");var s=f;return i[s]=l,f+=1,s}function a(l){delete i[l]}return{getState:e,setState:n,subscribe:c,unsubscribe:a}}function _mergeNamespaces(t,i){return i.forEach(function(f){Object.keys(f).forEach(function(r){if(r!=="default"&&!(r in t)){var e=Object.getOwnPropertyDescriptor(f,r);Object.defineProperty(t,r,e.get?e:{enumerable:!0,get:function(){return f[r]}})}})}),Object.freeze(t)}function ownKeys(t,i){var f=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),f.push.apply(f,r)}return f}function _objectSpread2(t){for(var i=1;i<arguments.length;i++){var f=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(f),!0).forEach(function(r){_defineProperty(t,r,f[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(f)):ownKeys(Object(f)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(f,r))})}return t}function _defineProperty(t,i,f){return i in t?Object.defineProperty(t,i,{value:f,enumerable:!0,configurable:!0,writable:!0}):t[i]=f,t}function _slicedToArray(t,i){return _arrayWithHoles(t)||_iterableToArrayLimit(t,i)||_unsupportedIterableToArray(t,i)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,i){var f=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(f!=null){var r,e,n=[],c=!0,a=!1;try{for(f=f.call(t);!(c=(r=f.next()).done)&&(n.push(r.value),!i||n.length!==i);c=!0);}catch(l){a=!0,e=l}finally{try{c||f.return==null||f.return()}finally{if(a)throw e}}return n}}function _unsupportedIterableToArray(t,i){if(t){if(typeof t=="string")return _arrayLikeToArray(t,i);var f=Object.prototype.toString.call(t).slice(8,-1);return f==="Object"&&t.constructor&&(f=t.constructor.name),f==="Map"||f==="Set"?Array.from(t):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(i==null||i>t.length)&&(i=t.length);for(var f=0,r=new Array(i);f<i;f++)r[f]=t[f];return r}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function createCommonjsModule(t){var i={exports:{}};return t(i,i.exports),i.exports}var UZIP_1=createCommonjsModule(function(t){var i,f,r={};t.exports=r,r.parse=function(e,n){for(var c=r.bin.readUshort,a=r.bin.readUint,l=0,s={},m=new Uint8Array(e),h=m.length-4;a(m,h)!=101010256;)h--;l=h,l+=4;var u=c(m,l+=4);c(m,l+=2);var d=a(m,l+=2),g=a(m,l+=4);l+=4,l=g;for(var p=0;p<u;p++){a(m,l),l+=4,l+=4,l+=4,a(m,l+=4),d=a(m,l+=4);var U=a(m,l+=4),I=c(m,l+=4),y=c(m,l+2),w=c(m,l+4);l+=6;var F=a(m,l+=8);l+=4,l+=I+y+w,r._readLocal(m,F,s,d,U,n)}return s},r._readLocal=function(e,n,c,a,l,s){var m=r.bin.readUshort,h=r.bin.readUint;h(e,n),m(e,n+=4),m(e,n+=2);var u=m(e,n+=2);h(e,n+=2),h(e,n+=4),n+=4;var d=m(e,n+=8),g=m(e,n+=2);n+=2;var p=r.bin.readUTF8(e,n,d);if(n+=d,n+=g,s)c[p]={size:l,csize:a};else{var U=new Uint8Array(e.buffer,n);if(u==0)c[p]=new Uint8Array(U.buffer.slice(n,n+a));else{if(u!=8)throw"unknown compression method: "+u;var I=new Uint8Array(l);r.inflateRaw(U,I),c[p]=I}}},r.inflateRaw=function(e,n){return r.F.inflate(e,n)},r.inflate=function(e,n){return e[0],e[1],r.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),n)},r.deflate=function(e,n){n==null&&(n={level:6});var c=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[c]=120,a[c+1]=156,c+=2,c=r.F.deflateRaw(e,a,c,n.level);var l=r.adler(e,0,e.length);return a[c+0]=l>>>24&255,a[c+1]=l>>>16&255,a[c+2]=l>>>8&255,a[c+3]=l>>>0&255,new Uint8Array(a.buffer,0,c+4)},r.deflateRaw=function(e,n){n==null&&(n={level:6});var c=new Uint8Array(50+Math.floor(1.1*e.length)),a=r.F.deflateRaw(e,c,a,n.level);return new Uint8Array(c.buffer,0,a)},r.encode=function(e,n){n==null&&(n=!1);var c=0,a=r.bin.writeUint,l=r.bin.writeUshort,s={};for(var m in e){var h=!r._noNeed(m)&&!n,u=e[m],d=r.crc.crc(u,0,u.length);s[m]={cpr:h,usize:u.length,crc:d,file:h?r.deflateRaw(u):u}}for(var m in s)c+=s[m].file.length+30+46+2*r.bin.sizeUTF8(m);c+=22;var g=new Uint8Array(c),p=0,U=[];for(var m in s){var I=s[m];U.push(p),p=r._writeHeader(g,p,m,I,0)}var y=0,w=p;for(var m in s)I=s[m],U.push(p),p=r._writeHeader(g,p,m,I,1,U[y++]);var F=p-w;return a(g,p,101010256),p+=4,l(g,p+=4,y),l(g,p+=2,y),a(g,p+=2,F),a(g,p+=4,w),p+=4,p+=2,g.buffer},r._noNeed=function(e){var n=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(n)!=-1},r._writeHeader=function(e,n,c,a,l,s){var m=r.bin.writeUint,h=r.bin.writeUshort,u=a.file;return m(e,n,l==0?67324752:33639248),n+=4,l==1&&(n+=2),h(e,n,20),h(e,n+=2,0),h(e,n+=2,a.cpr?8:0),m(e,n+=2,0),m(e,n+=4,a.crc),m(e,n+=4,u.length),m(e,n+=4,a.usize),h(e,n+=4,r.bin.sizeUTF8(c)),h(e,n+=2,0),n+=2,l==1&&(n+=2,n+=2,m(e,n+=6,s),n+=4),n+=r.bin.writeUTF8(e,n,c),l==0&&(e.set(u,n),n+=u.length),n},r.crc={table:function(){for(var e=new Uint32Array(256),n=0;n<256;n++){for(var c=n,a=0;a<8;a++)1&c?c=3988292384^c>>>1:c>>>=1;e[n]=c}return e}(),update:function(e,n,c,a){for(var l=0;l<a;l++)e=r.crc.table[255&(e^n[c+l])]^e>>>8;return e},crc:function(e,n,c){return 4294967295^r.crc.update(4294967295,e,n,c)}},r.adler=function(e,n,c){for(var a=1,l=0,s=n,m=n+c;s<m;){for(var h=Math.min(s+5552,m);s<h;)l+=a+=e[s++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(e,n){return e[n]|e[n+1]<<8},writeUshort:function(e,n,c){e[n]=255&c,e[n+1]=c>>8&255},readUint:function(e,n){return 16777216*e[n+3]+(e[n+2]<<16|e[n+1]<<8|e[n])},writeUint:function(e,n,c){e[n]=255&c,e[n+1]=c>>8&255,e[n+2]=c>>16&255,e[n+3]=c>>24&255},readASCII:function(e,n,c){for(var a="",l=0;l<c;l++)a+=String.fromCharCode(e[n+l]);return a},writeASCII:function(e,n,c){for(var a=0;a<c.length;a++)e[n+a]=c.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,n,c){for(var a,l="",s=0;s<c;s++)l+="%"+r.bin.pad(e[n+s].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(e,n,c)}return a},writeUTF8:function(e,n,c){for(var a=c.length,l=0,s=0;s<a;s++){var m=c.charCodeAt(s);if(!(4294967168&m))e[n+l]=m,l++;else if(!(4294965248&m))e[n+l]=192|m>>6,e[n+l+1]=128|m>>0&63,l+=2;else if(!(4294901760&m))e[n+l]=224|m>>12,e[n+l+1]=128|m>>6&63,e[n+l+2]=128|m>>0&63,l+=3;else{if(4292870144&m)throw"e";e[n+l]=240|m>>18,e[n+l+1]=128|m>>12&63,e[n+l+2]=128|m>>6&63,e[n+l+3]=128|m>>0&63,l+=4}}return l},sizeUTF8:function(e){for(var n=e.length,c=0,a=0;a<n;a++){var l=e.charCodeAt(a);if(!(4294967168&l))c++;else if(!(4294965248&l))c+=2;else if(!(4294901760&l))c+=3;else{if(4292870144&l)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(e,n,c,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],s=r.F.U,m=r.F._goodIndex;r.F._hash;var h=r.F._putsE,u=0,d=c<<3,g=0,p=e.length;if(a==0){for(;u<p;)h(n,d,u+(E=Math.min(65535,p-u))==p?1:0),d=r.F._copyExact(e,u,E,n,d+8),u+=E;return d>>>3}var U=s.lits,I=s.strt,y=s.prev,w=0,F=0,_=0,v=0,P=0,A=0;for(p>2&&(I[A=r.F._hash(e,0)]=0),u=0;u<p;u++){if(P=A,u+1<p-2){A=r.F._hash(e,u+1);var C=u+1&32767;y[C]=I[A],I[A]=C}if(g<=u){(w>14e3||F>26697)&&p-u>100&&(g<u&&(U[w]=u-g,w+=2,g=u),d=r.F._writeBlock(u==p-1||g==p?1:0,U,w,v,e,_,u-_,n,d),w=F=v=0,_=u);var b=0;u<p-2&&(b=r.F._bestMatch(e,u,y,P,Math.min(l[2],p-u),l[3]));var E=b>>>16,G=65535&b;if(b!=0){G=65535&b;var B=m(E=b>>>16,s.of0);s.lhst[257+B]++;var M=m(G,s.df0);s.dhst[M]++,v+=s.exb[B]+s.dxb[M],U[w]=E<<23|u-g,U[w+1]=G<<16|B<<8|M,w+=2,g=u+E}else s.lhst[e[u]]++;F++}}for(_==u&&e.length!=0||(g<u&&(U[w]=u-g,w+=2,g=u),d=r.F._writeBlock(1,U,w,v,e,_,u-_,n,d),w=0,F=0,w=F=v=0,_=u);7&d;)d++;return d>>>3},r.F._bestMatch=function(e,n,c,a,l,s){var m=32767&n,h=c[m],u=m-h+32768&32767;if(h==m||a!=r.F._hash(e,n-u))return 0;for(var d=0,g=0,p=Math.min(32767,n);u<=p&&--s!=0&&h!=m;){if(d==0||e[n+d]==e[n+d-u]){var U=r.F._howLong(e,n,u);if(U>d){if(g=u,(d=U)>=l)break;u+2<U&&(U=u+2);for(var I=0,y=0;y<U-2;y++){var w=n-u+y+32768&32767,F=w-c[w]+32768&32767;F>I&&(I=F,h=w)}}}u+=(m=h)-(h=c[m])+32768&32767}return d<<16|g},r.F._howLong=function(e,n,c){if(e[n]!=e[n-c]||e[n+1]!=e[n+1-c]||e[n+2]!=e[n+2-c])return 0;var a=n,l=Math.min(e.length,n+258);for(n+=3;n<l&&e[n]==e[n-c];)n++;return n-a},r.F._hash=function(e,n){return(e[n]<<8|e[n+1])+(e[n+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(e,n,c,a,l,s,m,h,u){var d,g,p,U,I,y,w,F,_,v=r.F.U,P=r.F._putsF,A=r.F._putsE;v.lhst[256]++,g=(d=r.F.getTrees())[0],p=d[1],U=d[2],I=d[3],y=d[4],w=d[5],F=d[6],_=d[7];var C=32+(u+3&7?8-(u+3&7):0)+(m<<3),b=a+r.F.contSize(v.fltree,v.lhst)+r.F.contSize(v.fdtree,v.dhst),E=a+r.F.contSize(v.ltree,v.lhst)+r.F.contSize(v.dtree,v.dhst);E+=14+3*w+r.F.contSize(v.itree,v.ihst)+(2*v.ihst[16]+3*v.ihst[17]+7*v.ihst[18]);for(var G=0;G<286;G++)v.lhst[G]=0;for(G=0;G<30;G++)v.dhst[G]=0;for(G=0;G<19;G++)v.ihst[G]=0;var B=C<b&&C<E?0:b<E?1:2;if(P(h,u,e),P(h,u+1,B),u+=3,B==0){for(;7&u;)u++;u=r.F._copyExact(l,s,m,h,u)}else{var M,Z;if(B==1&&(M=v.fltree,Z=v.fdtree),B==2){r.F.makeCodes(v.ltree,g),r.F.revCodes(v.ltree,g),r.F.makeCodes(v.dtree,p),r.F.revCodes(v.dtree,p),r.F.makeCodes(v.itree,U),r.F.revCodes(v.itree,U),M=v.ltree,Z=v.dtree,A(h,u,I-257),A(h,u+=5,y-1),A(h,u+=5,w-4),u+=4;for(var R=0;R<w;R++)A(h,u+3*R,v.itree[1+(v.ordr[R]<<1)]);u+=3*w,u=r.F._codeTiny(F,v.itree,h,u),u=r.F._codeTiny(_,v.itree,h,u)}for(var S=s,O=0;O<c;O+=2){for(var x=n[O],T=x>>>23,D=S+(8388607&x);S<D;)u=r.F._writeLit(l[S++],M,h,u);if(T!=0){var L=n[O+1],k=L>>16,V=L>>8&255,q=255&L;A(h,u=r.F._writeLit(257+V,M,h,u),T-v.of0[V]),u+=v.exb[V],P(h,u=r.F._writeLit(q,Z,h,u),k-v.df0[q]),u+=v.dxb[q],S+=T}}u=r.F._writeLit(256,M,h,u)}return u},r.F._copyExact=function(e,n,c,a,l){var s=l>>>3;return a[s]=c,a[s+1]=c>>>8,a[s+2]=255-a[s],a[s+3]=255-a[s+1],s+=4,a.set(new Uint8Array(e.buffer,n,c),s),l+(c+4<<3)},r.F.getTrees=function(){for(var e=r.F.U,n=r.F._hufTree(e.lhst,e.ltree,15),c=r.F._hufTree(e.dhst,e.dtree,15),a=[],l=r.F._lenCodes(e.ltree,a),s=[],m=r.F._lenCodes(e.dtree,s),h=0;h<a.length;h+=2)e.ihst[a[h]]++;for(h=0;h<s.length;h+=2)e.ihst[s[h]]++;for(var u=r.F._hufTree(e.ihst,e.itree,7),d=19;d>4&&e.itree[1+(e.ordr[d-1]<<1)]==0;)d--;return[n,c,u,l,m,d,a,s]},r.F.getSecond=function(e){for(var n=[],c=0;c<e.length;c+=2)n.push(e[c+1]);return n},r.F.nonZero=function(e){for(var n="",c=0;c<e.length;c+=2)e[c+1]!=0&&(n+=(c>>1)+",");return n},r.F.contSize=function(e,n){for(var c=0,a=0;a<n.length;a++)c+=n[a]*e[1+(a<<1)];return c},r.F._codeTiny=function(e,n,c,a){for(var l=0;l<e.length;l+=2){var s=e[l],m=e[l+1];a=r.F._writeLit(s,n,c,a);var h=s==16?2:s==17?3:7;s>15&&(r.F._putsE(c,a,m,h),a+=h)}return a},r.F._lenCodes=function(e,n){for(var c=e.length;c!=2&&e[c-1]==0;)c-=2;for(var a=0;a<c;a+=2){var l=e[a+1],s=a+3<c?e[a+3]:-1,m=a+5<c?e[a+5]:-1,h=a==0?-1:e[a-1];if(l==0&&s==l&&m==l){for(var u=a+5;u+2<c&&e[u+2]==l;)u+=2;(d=Math.min(u+1-a>>>1,138))<11?n.push(17,d-3):n.push(18,d-11),a+=2*d-2}else if(l==h&&s==l&&m==l){for(u=a+5;u+2<c&&e[u+2]==l;)u+=2;var d=Math.min(u+1-a>>>1,6);n.push(16,d-3),a+=2*d-2}else n.push(l,0)}return c>>>1},r.F._hufTree=function(e,n,c){var a=[],l=e.length,s=n.length,m=0;for(m=0;m<s;m+=2)n[m]=0,n[m+1]=0;for(m=0;m<l;m++)e[m]!=0&&a.push({lit:m,f:e[m]});var h=a.length,u=a.slice(0);if(h==0)return 0;if(h==1){var d=a[0].lit;return u=d==0?1:0,n[1+(d<<1)]=1,n[1+(u<<1)]=1,1}a.sort(function(F,_){return F.f-_.f});var g=a[0],p=a[1],U=0,I=1,y=2;for(a[0]={lit:-1,f:g.f+p.f,l:g,r:p,d:0};I!=h-1;)g=U!=I&&(y==h||a[U].f<a[y].f)?a[U++]:a[y++],p=U!=I&&(y==h||a[U].f<a[y].f)?a[U++]:a[y++],a[I++]={lit:-1,f:g.f+p.f,l:g,r:p};var w=r.F.setDepth(a[I-1],0);for(w>c&&(r.F.restrictDepth(u,c,w),w=c),m=0;m<h;m++)n[1+(u[m].lit<<1)]=u[m].d;return w},r.F.setDepth=function(e,n){return e.lit!=-1?(e.d=n,n):Math.max(r.F.setDepth(e.l,n+1),r.F.setDepth(e.r,n+1))},r.F.restrictDepth=function(e,n,c){var a=0,l=1<<c-n,s=0;for(e.sort(function(h,u){return u.d==h.d?h.f-u.f:u.d-h.d}),a=0;a<e.length&&e[a].d>n;a++){var m=e[a].d;e[a].d=n,s+=l-(1<<c-m)}for(s>>>=c-n;s>0;)(m=e[a].d)<n?(e[a].d++,s-=1<<n-m-1):a++;for(;a>=0;a--)e[a].d==n&&s<0&&(e[a].d--,s++);s!=0&&console.log("debt left")},r.F._goodIndex=function(e,n){var c=0;return n[16|c]<=e&&(c|=16),n[8|c]<=e&&(c|=8),n[4|c]<=e&&(c|=4),n[2|c]<=e&&(c|=2),n[1|c]<=e&&(c|=1),c},r.F._writeLit=function(e,n,c,a){return r.F._putsF(c,a,n[e<<1]),a+n[1+(e<<1)]},r.F.inflate=function(e,n){var c=Uint8Array;if(e[0]==3&&e[1]==0)return n||new c(0);var a=r.F,l=a._bitsF,s=a._bitsE,m=a._decodeTiny,h=a.makeCodes,u=a.codes2map,d=a._get17,g=a.U,p=n==null;p&&(n=new c(e.length>>>2<<3));for(var U,I,y=0,w=0,F=0,_=0,v=0,P=0,A=0,C=0,b=0;y==0;)if(y=l(e,b,1),w=l(e,b+1,2),b+=3,w!=0){if(p&&(n=r.F._check(n,C+(1<<17))),w==1&&(U=g.flmap,I=g.fdmap,P=511,A=31),w==2){F=s(e,b,5)+257,_=s(e,b+5,5)+1,v=s(e,b+10,4)+4,b+=14;for(var E=0;E<38;E+=2)g.itree[E]=0,g.itree[E+1]=0;var G=1;for(E=0;E<v;E++){var B=s(e,b+3*E,3);g.itree[1+(g.ordr[E]<<1)]=B,B>G&&(G=B)}b+=3*v,h(g.itree,G),u(g.itree,G,g.imap),U=g.lmap,I=g.dmap,b=m(g.imap,(1<<G)-1,F+_,e,b,g.ttree);var M=a._copyOut(g.ttree,0,F,g.ltree);P=(1<<M)-1;var Z=a._copyOut(g.ttree,F,_,g.dtree);A=(1<<Z)-1,h(g.ltree,M),u(g.ltree,M,U),h(g.dtree,Z),u(g.dtree,Z,I)}for(;;){var R=U[d(e,b)&P];b+=15&R;var S=R>>>4;if(!(S>>>8))n[C++]=S;else{if(S==256)break;var O=C+S-254;if(S>264){var x=g.ldef[S-257];O=C+(x>>>3)+s(e,b,7&x),b+=7&x}var T=I[d(e,b)&A];b+=15&T;var D=T>>>4,L=g.ddef[D],k=(L>>>4)+l(e,b,15&L);for(b+=15&L,p&&(n=r.F._check(n,C+(1<<17)));C<O;)n[C]=n[C++-k],n[C]=n[C++-k],n[C]=n[C++-k],n[C]=n[C++-k];C=O}}}else{7&b&&(b+=8-(7&b));var V=4+(b>>>3),q=e[V-4]|e[V-3]<<8;p&&(n=r.F._check(n,C+q)),n.set(new c(e.buffer,e.byteOffset+V,q),C),b=V+q<<3,C+=q}return n.length==C?n:n.slice(0,C)},r.F._check=function(e,n){var c=e.length;if(n<=c)return e;var a=new Uint8Array(Math.max(c<<1,n));return a.set(e,0),a},r.F._decodeTiny=function(e,n,c,a,l,s){for(var m=r.F._bitsE,h=r.F._get17,u=0;u<c;){var d=e[h(a,l)&n];l+=15&d;var g=d>>>4;if(g<=15)s[u]=g,u++;else{var p=0,U=0;g==16?(U=3+m(a,l,2),l+=2,p=s[u-1]):g==17?(U=3+m(a,l,3),l+=3):g==18&&(U=11+m(a,l,7),l+=7);for(var I=u+U;u<I;)s[u]=p,u++}}return l},r.F._copyOut=function(e,n,c,a){for(var l=0,s=0,m=a.length>>>1;s<c;){var h=e[s+n];a[s<<1]=0,a[1+(s<<1)]=h,h>l&&(l=h),s++}for(;s<m;)a[s<<1]=0,a[1+(s<<1)]=0,s++;return l},r.F.makeCodes=function(e,n){for(var c,a,l,s,m=r.F.U,h=e.length,u=m.bl_count,d=0;d<=n;d++)u[d]=0;for(d=1;d<h;d+=2)u[e[d]]++;var g=m.next_code;for(c=0,u[0]=0,a=1;a<=n;a++)c=c+u[a-1]<<1,g[a]=c;for(l=0;l<h;l+=2)(s=e[l+1])!=0&&(e[l]=g[s],g[s]++)},r.F.codes2map=function(e,n,c){for(var a=e.length,l=r.F.U.rev15,s=0;s<a;s+=2)if(e[s+1]!=0)for(var m=s>>1,h=e[s+1],u=m<<4|h,d=n-h,g=e[s]<<d,p=g+(1<<d);g!=p;)c[l[g]>>>15-n]=u,g++},r.F.revCodes=function(e,n){for(var c=r.F.U.rev15,a=15-n,l=0;l<e.length;l+=2){var s=e[l]<<n-e[l+1];e[l]=c[s]>>>a}},r.F._putsE=function(e,n,c){c<<=7&n;var a=n>>>3;e[a]|=c,e[a+1]|=c>>>8},r.F._putsF=function(e,n,c){c<<=7&n;var a=n>>>3;e[a]|=c,e[a+1]|=c>>>8,e[a+2]|=c>>>16},r.F._bitsE=function(e,n,c){return(e[n>>>3]|e[1+(n>>>3)]<<8)>>>(7&n)&(1<<c)-1},r.F._bitsF=function(e,n,c){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)&(1<<c)-1},r.F._get17=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)},r.F._get25=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16|e[3+(n>>>3)]<<24)>>>(7&n)},r.F.U=(i=Uint16Array,f=Uint32Array,{next_code:new i(16),bl_count:new i(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new i(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new f(32),flmap:new i(512),fltree:[],fdmap:new i(32),fdtree:[],lmap:new i(32768),ltree:[],ttree:[],dmap:new i(32768),dtree:[],imap:new i(512),itree:[],rev15:new i(32768),lhst:new f(286),dhst:new f(30),ihst:new f(19),lits:new f(15e3),strt:new i(65536),prev:new i(32768)}),function(){for(var e=r.F.U,n=0;n<32768;n++){var c=n;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,e.rev15[n]=(c>>>16|c<<16)>>>17}function a(l,s,m){for(;s--!=0;)l.push(0,m)}for(n=0;n<32;n++)e.ldef[n]=e.of0[n]<<3|e.exb[n],e.ddef[n]=e.df0[n]<<4|e.dxb[n];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),r.F.makeCodes(e.fltree,9),r.F.codes2map(e.fltree,9,e.flmap),r.F.revCodes(e.fltree,9),a(e.fdtree,32,5),r.F.makeCodes(e.fdtree,5),r.F.codes2map(e.fdtree,5,e.fdmap),r.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)}()}),UZIP=Object.freeze(_mergeNamespaces({__proto__:null,default:UZIP_1},[UZIP_1])),UPNG={},N,W,H;UPNG.toRGBA8=function(t){var i=t.width,f=t.height;if(t.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(t.data,i,f,t).buffer];var r=[];t.frames[0].data==null&&(t.frames[0].data=t.data);for(var e=i*f*4,n=new Uint8Array(e),c=new Uint8Array(e),a=new Uint8Array(e),l=0;l<t.frames.length;l++){var s=t.frames[l],m=s.rect.x,h=s.rect.y,u=s.rect.width,d=s.rect.height,g=UPNG.toRGBA8.decodeImage(s.data,u,d,t);if(l!=0)for(var p=0;p<e;p++)a[p]=n[p];if(s.blend==0?UPNG._copyTile(g,u,d,n,i,f,m,h,0):s.blend==1&&UPNG._copyTile(g,u,d,n,i,f,m,h,1),r.push(n.buffer.slice(0)),s.dispose!=0){if(s.dispose==1)UPNG._copyTile(c,u,d,n,i,f,m,h,0);else if(s.dispose==2)for(p=0;p<e;p++)n[p]=a[p]}}return r},UPNG.toRGBA8.decodeImage=function(t,i,f,r){var e=i*f,n=UPNG.decode._getBPP(r),c=Math.ceil(i*n/8),a=new Uint8Array(4*e),l=new Uint32Array(a.buffer),s=r.ctype,m=r.depth,h=UPNG._bin.readUshort;if(s==6){var u=e<<2;if(m==8)for(var d=0;d<u;d+=4)a[d]=t[d],a[d+1]=t[d+1],a[d+2]=t[d+2],a[d+3]=t[d+3];if(m==16)for(d=0;d<u;d++)a[d]=t[d<<1]}else if(s==2){var g=r.tabs.tRNS;if(g==null){if(m==8)for(d=0;d<e;d++){var p=3*d;l[d]=255<<24|t[p+2]<<16|t[p+1]<<8|t[p]}if(m==16)for(d=0;d<e;d++)p=6*d,l[d]=255<<24|t[p+4]<<16|t[p+2]<<8|t[p]}else{var U=g[0],I=g[1],y=g[2];if(m==8)for(d=0;d<e;d++){var w=d<<2;p=3*d,l[d]=255<<24|t[p+2]<<16|t[p+1]<<8|t[p],t[p]==U&&t[p+1]==I&&t[p+2]==y&&(a[w+3]=0)}if(m==16)for(d=0;d<e;d++)w=d<<2,p=6*d,l[d]=255<<24|t[p+4]<<16|t[p+2]<<8|t[p],h(t,p)==U&&h(t,p+2)==I&&h(t,p+4)==y&&(a[w+3]=0)}}else if(s==3){var F=r.tabs.PLTE,_=r.tabs.tRNS,v=_?_.length:0;if(m==1)for(var P=0;P<f;P++){var A=P*c,C=P*i;for(d=0;d<i;d++){w=C+d<<2;var b=3*(E=t[A+(d>>3)]>>7-((7&d)<<0)&1);a[w]=F[b],a[w+1]=F[b+1],a[w+2]=F[b+2],a[w+3]=E<v?_[E]:255}}if(m==2)for(P=0;P<f;P++)for(A=P*c,C=P*i,d=0;d<i;d++)w=C+d<<2,b=3*(E=t[A+(d>>2)]>>6-((3&d)<<1)&3),a[w]=F[b],a[w+1]=F[b+1],a[w+2]=F[b+2],a[w+3]=E<v?_[E]:255;if(m==4)for(P=0;P<f;P++)for(A=P*c,C=P*i,d=0;d<i;d++)w=C+d<<2,b=3*(E=t[A+(d>>1)]>>4-((1&d)<<2)&15),a[w]=F[b],a[w+1]=F[b+1],a[w+2]=F[b+2],a[w+3]=E<v?_[E]:255;if(m==8)for(d=0;d<e;d++){var E;w=d<<2,b=3*(E=t[d]),a[w]=F[b],a[w+1]=F[b+1],a[w+2]=F[b+2],a[w+3]=E<v?_[E]:255}}else if(s==4){if(m==8)for(d=0;d<e;d++){w=d<<2;var G=t[B=d<<1];a[w]=G,a[w+1]=G,a[w+2]=G,a[w+3]=t[B+1]}if(m==16)for(d=0;d<e;d++){var B;w=d<<2,G=t[B=d<<2],a[w]=G,a[w+1]=G,a[w+2]=G,a[w+3]=t[B+2]}}else if(s==0)for(U=r.tabs.tRNS?r.tabs.tRNS:-1,P=0;P<f;P++){var M=P*c,Z=P*i;if(m==1)for(var R=0;R<i;R++){var S=(G=255*(t[M+(R>>>3)]>>>7-(7&R)&1))==255*U?0:255;l[Z+R]=S<<24|G<<16|G<<8|G}else if(m==2)for(R=0;R<i;R++)S=(G=85*(t[M+(R>>>2)]>>>6-((3&R)<<1)&3))==85*U?0:255,l[Z+R]=S<<24|G<<16|G<<8|G;else if(m==4)for(R=0;R<i;R++)S=(G=17*(t[M+(R>>>1)]>>>4-((1&R)<<2)&15))==17*U?0:255,l[Z+R]=S<<24|G<<16|G<<8|G;else if(m==8)for(R=0;R<i;R++)S=(G=t[M+R])==U?0:255,l[Z+R]=S<<24|G<<16|G<<8|G;else if(m==16)for(R=0;R<i;R++)G=t[M+(R<<1)],S=h(t,M+(R<<d))==U?0:255,l[Z+R]=S<<24|G<<16|G<<8|G}return a},UPNG.decode=function(t){for(var i,f=new Uint8Array(t),r=8,e=UPNG._bin,n=e.readUshort,c=e.readUint,a={tabs:{},frames:[]},l=new Uint8Array(f.length),s=0,m=0,h=[137,80,78,71,13,10,26,10],u=0;u<8;u++)if(f[u]!=h[u])throw"The input is not a PNG file!";for(;r<f.length;){var d=e.readUint(f,r);r+=4;var g=e.readASCII(f,r,4);if(r+=4,g=="IHDR")UPNG.decode._IHDR(f,r,a);else if(g=="CgBI")a.tabs[g]=f.slice(r,r+4);else if(g=="IDAT"){for(u=0;u<d;u++)l[s+u]=f[r+u];s+=d}else if(g=="acTL")a.tabs[g]={num_frames:c(f,r),num_plays:c(f,r+4)},i=new Uint8Array(f.length);else if(g=="fcTL"){var p;m!=0&&((p=a.frames[a.frames.length-1]).data=UPNG.decode._decompress(a,i.slice(0,m),p.rect.width,p.rect.height),m=0);var U={x:c(f,r+12),y:c(f,r+16),width:c(f,r+4),height:c(f,r+8)},I=n(f,r+22);I=n(f,r+20)/(I==0?100:I);var y={rect:U,delay:Math.round(1e3*I),dispose:f[r+24],blend:f[r+25]};a.frames.push(y)}else if(g=="fdAT"){for(u=0;u<d-4;u++)i[m+u]=f[r+u+4];m+=d-4}else if(g=="pHYs")a.tabs[g]=[e.readUint(f,r),e.readUint(f,r+4),f[r+8]];else if(g=="cHRM")for(a.tabs[g]=[],u=0;u<8;u++)a.tabs[g].push(e.readUint(f,r+4*u));else if(g=="tEXt"||g=="zTXt"){a.tabs[g]==null&&(a.tabs[g]={});var w=e.nextZero(f,r),F=e.readASCII(f,r,w-r),_=r+d-w-1;if(g=="tEXt")A=e.readASCII(f,w+1,_);else{var v=UPNG.decode._inflate(f.slice(w+2,w+2+_));A=e.readUTF8(v,0,v.length)}a.tabs[g][F]=A}else if(g=="iTXt"){a.tabs[g]==null&&(a.tabs[g]={}),w=0;var P=r;w=e.nextZero(f,P),F=e.readASCII(f,P,w-P);var A,C=f[P=w+1];f[P+1],P+=2,w=e.nextZero(f,P),e.readASCII(f,P,w-P),P=w+1,w=e.nextZero(f,P),e.readUTF8(f,P,w-P),_=d-((P=w+1)-r),C==0?A=e.readUTF8(f,P,_):(v=UPNG.decode._inflate(f.slice(P,P+_)),A=e.readUTF8(v,0,v.length)),a.tabs[g][F]=A}else if(g=="PLTE")a.tabs[g]=e.readBytes(f,r,d);else if(g=="hIST"){var b=a.tabs.PLTE.length/3;for(a.tabs[g]=[],u=0;u<b;u++)a.tabs[g].push(n(f,r+2*u))}else if(g=="tRNS")a.ctype==3?a.tabs[g]=e.readBytes(f,r,d):a.ctype==0?a.tabs[g]=n(f,r):a.ctype==2&&(a.tabs[g]=[n(f,r),n(f,r+2),n(f,r+4)]);else if(g=="gAMA")a.tabs[g]=e.readUint(f,r)/1e5;else if(g=="sRGB")a.tabs[g]=f[r];else if(g=="bKGD")a.ctype==0||a.ctype==4?a.tabs[g]=[n(f,r)]:a.ctype==2||a.ctype==6?a.tabs[g]=[n(f,r),n(f,r+2),n(f,r+4)]:a.ctype==3&&(a.tabs[g]=f[r]);else if(g=="IEND")break;r+=d,e.readUint(f,r),r+=4}return m!=0&&((p=a.frames[a.frames.length-1]).data=UPNG.decode._decompress(a,i.slice(0,m),p.rect.width,p.rect.height),m=0),a.data=UPNG.decode._decompress(a,l,a.width,a.height),delete a.compress,delete a.interlace,delete a.filter,a},UPNG.decode._decompress=function(t,i,f,r){var e=UPNG.decode._getBPP(t),n=Math.ceil(f*e/8),c=new Uint8Array((n+1+t.interlace)*r);return i=t.tabs.CgBI?UPNG.inflateRaw(i,c):UPNG.decode._inflate(i,c),t.interlace==0?i=UPNG.decode._filterZero(i,t,0,f,r):t.interlace==1&&(i=UPNG.decode._readInterlace(i,t)),i},UPNG.decode._inflate=function(t,i){return UPNG.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),i)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(t,i){var f,r,e=Uint8Array,n=0,c=0,a=0,l=0,s=0,m=0,h=0,u=0,d=0;if(t[0]==3&&t[1]==0)return i||new e(0);var g=H.H,p=g.b,U=g.e,I=g.R,y=g.n,w=g.A,F=g.Z,_=g.m,v=i==null;for(v&&(i=new e(t.length>>>2<<5));n==0;)if(n=p(t,d,1),c=p(t,d+1,2),d+=3,c!=0){if(v&&(i=H.H.W(i,u+(1<<17))),c==1&&(f=_.J,r=_.h,m=511,h=31),c==2){a=U(t,d,5)+257,l=U(t,d+5,5)+1,s=U(t,d+10,4)+4,d+=14;for(var P=1,A=0;A<38;A+=2)_.Q[A]=0,_.Q[A+1]=0;for(A=0;A<s;A++){var C=U(t,d+3*A,3);_.Q[1+(_.X[A]<<1)]=C,C>P&&(P=C)}d+=3*s,y(_.Q,P),w(_.Q,P,_.u),f=_.w,r=_.d,d=I(_.u,(1<<P)-1,a+l,t,d,_.v);var b=g.V(_.v,0,a,_.C);m=(1<<b)-1;var E=g.V(_.v,a,l,_.D);h=(1<<E)-1,y(_.C,b),w(_.C,b,f),y(_.D,E),w(_.D,E,r)}for(;;){var G=f[F(t,d)&m];d+=15&G;var B=G>>>4;if(!(B>>>8))i[u++]=B;else{if(B==256)break;var M=u+B-254;if(B>264){var Z=_.q[B-257];M=u+(Z>>>3)+U(t,d,7&Z),d+=7&Z}var R=r[F(t,d)&h];d+=15&R;var S=R>>>4,O=_.c[S],x=(O>>>4)+p(t,d,15&O);for(d+=15&O;u<M;)i[u]=i[u++-x],i[u]=i[u++-x],i[u]=i[u++-x],i[u]=i[u++-x];u=M}}}else{7&d&&(d+=8-(7&d));var T=4+(d>>>3),D=t[T-4]|t[T-3]<<8;v&&(i=H.H.W(i,u+D)),i.set(new e(t.buffer,t.byteOffset+T,D),u),d=T+D<<3,u+=D}return i.length==u?i:i.slice(0,u)},H.H.W=function(t,i){var f=t.length;if(i<=f)return t;var r=new Uint8Array(f<<1);return r.set(t,0),r},H.H.R=function(t,i,f,r,e,n){for(var c=H.H.e,a=H.H.Z,l=0;l<f;){var s=t[a(r,e)&i];e+=15&s;var m=s>>>4;if(m<=15)n[l]=m,l++;else{var h=0,u=0;m==16?(u=3+c(r,e,2),e+=2,h=n[l-1]):m==17?(u=3+c(r,e,3),e+=3):m==18&&(u=11+c(r,e,7),e+=7);for(var d=l+u;l<d;)n[l]=h,l++}}return e},H.H.V=function(t,i,f,r){for(var e=0,n=0,c=r.length>>>1;n<f;){var a=t[n+i];r[n<<1]=0,r[1+(n<<1)]=a,a>e&&(e=a),n++}for(;n<c;)r[n<<1]=0,r[1+(n<<1)]=0,n++;return e},H.H.n=function(t,i){for(var f,r,e,n,c=H.H.m,a=t.length,l=c.j,s=0;s<=i;s++)l[s]=0;for(s=1;s<a;s+=2)l[t[s]]++;var m=c.K;for(f=0,l[0]=0,r=1;r<=i;r++)f=f+l[r-1]<<1,m[r]=f;for(e=0;e<a;e+=2)(n=t[e+1])!=0&&(t[e]=m[n],m[n]++)},H.H.A=function(t,i,f){for(var r=t.length,e=H.H.m.r,n=0;n<r;n+=2)if(t[n+1]!=0)for(var c=n>>1,a=t[n+1],l=c<<4|a,s=i-a,m=t[n]<<s,h=m+(1<<s);m!=h;)f[e[m]>>>15-i]=l,m++},H.H.l=function(t,i){for(var f=H.H.m.r,r=15-i,e=0;e<t.length;e+=2){var n=t[e]<<i-t[e+1];t[e]=f[n]>>>r}},H.H.M=function(t,i,f){f<<=7&i;var r=i>>>3;t[r]|=f,t[r+1]|=f>>>8},H.H.I=function(t,i,f){f<<=7&i;var r=i>>>3;t[r]|=f,t[r+1]|=f>>>8,t[r+2]|=f>>>16},H.H.e=function(t,i,f){return(t[i>>>3]|t[1+(i>>>3)]<<8)>>>(7&i)&(1<<f)-1},H.H.b=function(t,i,f){return(t[i>>>3]|t[1+(i>>>3)]<<8|t[2+(i>>>3)]<<16)>>>(7&i)&(1<<f)-1},H.H.Z=function(t,i){return(t[i>>>3]|t[1+(i>>>3)]<<8|t[2+(i>>>3)]<<16)>>>(7&i)},H.H.i=function(t,i){return(t[i>>>3]|t[1+(i>>>3)]<<8|t[2+(i>>>3)]<<16|t[3+(i>>>3)]<<24)>>>(7&i)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var t=H.H.m,i=0;i<32768;i++){var f=i;f=(4278255360&(f=(4042322160&(f=(3435973836&(f=(2863311530&f)>>>1|(1431655765&f)<<1))>>>2|(858993459&f)<<2))>>>4|(252645135&f)<<4))>>>8|(16711935&f)<<8,t.r[i]=(f>>>16|f<<16)>>>17}function r(e,n,c){for(;n--!=0;)e.push(0,c)}for(i=0;i<32;i++)t.q[i]=t.S[i]<<3|t.T[i],t.c[i]=t.p[i]<<4|t.z[i];r(t._,144,8),r(t._,112,9),r(t._,24,7),r(t._,8,8),H.H.n(t._,9),H.H.A(t._,9,t.J),H.H.l(t._,9),r(t.$,32,5),H.H.n(t.$,5),H.H.A(t.$,5,t.h),H.H.l(t.$,5),r(t.Q,19,0),r(t.C,286,0),r(t.D,30,0),r(t.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(t,i){for(var f=i.width,r=i.height,e=UPNG.decode._getBPP(i),n=e>>3,c=Math.ceil(f*e/8),a=new Uint8Array(r*c),l=0,s=[0,0,4,0,2,0,1],m=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],u=[8,8,4,4,2,2,1],d=0;d<7;){for(var g=h[d],p=u[d],U=0,I=0,y=s[d];y<r;)y+=g,I++;for(var w=m[d];w<f;)w+=p,U++;var F=Math.ceil(U*e/8);UPNG.decode._filterZero(t,i,l,U,I);for(var _=0,v=s[d];v<r;){for(var P=m[d],A=l+_*F<<3;P<f;){var C;if(e==1&&(C=(C=t[A>>3])>>7-(7&A)&1,a[v*c+(P>>3)]|=C<<7-((7&P)<<0)),e==2&&(C=(C=t[A>>3])>>6-(7&A)&3,a[v*c+(P>>2)]|=C<<6-((3&P)<<1)),e==4&&(C=(C=t[A>>3])>>4-(7&A)&15,a[v*c+(P>>1)]|=C<<4-((1&P)<<2)),e>=8)for(var b=v*c+P*n,E=0;E<n;E++)a[b+E]=t[(A>>3)+E];A+=e,P+=p}_++,v+=g}U*I!=0&&(l+=I*(1+F)),d+=1}return a},UPNG.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},UPNG.decode._filterZero=function(t,i,f,r,e){var n=UPNG.decode._getBPP(i),c=Math.ceil(r*n/8),a=UPNG.decode._paeth;n=Math.ceil(n/8);var l=0,s=1,m=t[f],h=0;if(m>1&&(t[f]=[0,0,1][m-2]),m==3)for(h=n;h<c;h++)t[h+1]=t[h+1]+(t[h+1-n]>>>1)&255;for(var u=0;u<e;u++)if(h=0,(m=t[(s=(l=f+u*c)+u+1)-1])==0)for(;h<c;h++)t[l+h]=t[s+h];else if(m==1){for(;h<n;h++)t[l+h]=t[s+h];for(;h<c;h++)t[l+h]=t[s+h]+t[l+h-n]}else if(m==2)for(;h<c;h++)t[l+h]=t[s+h]+t[l+h-c];else if(m==3){for(;h<n;h++)t[l+h]=t[s+h]+(t[l+h-c]>>>1);for(;h<c;h++)t[l+h]=t[s+h]+(t[l+h-c]+t[l+h-n]>>>1)}else{for(;h<n;h++)t[l+h]=t[s+h]+a(0,t[l+h-c],0);for(;h<c;h++)t[l+h]=t[s+h]+a(t[l+h-n],t[l+h-c],t[l+h-n-c])}return t},UPNG.decode._paeth=function(t,i,f){var r=t+i-f,e=r-t,n=r-i,c=r-f;return e*e<=n*n&&e*e<=c*c?t:n*n<=c*c?i:f},UPNG.decode._IHDR=function(t,i,f){var r=UPNG._bin;f.width=r.readUint(t,i),i+=4,f.height=r.readUint(t,i),i+=4,f.depth=t[i],i++,f.ctype=t[i],i++,f.compress=t[i],i++,f.filter=t[i],i++,f.interlace=t[i],i++},UPNG._bin={nextZero:function(i,f){for(;i[f]!=0;)f++;return f},readUshort:function(i,f){return i[f]<<8|i[f+1]},writeUshort:function(i,f,r){i[f]=r>>8&255,i[f+1]=255&r},readUint:function(i,f){return 16777216*i[f]+(i[f+1]<<16|i[f+2]<<8|i[f+3])},writeUint:function(i,f,r){i[f]=r>>24&255,i[f+1]=r>>16&255,i[f+2]=r>>8&255,i[f+3]=255&r},readASCII:function(i,f,r){for(var e="",n=0;n<r;n++)e+=String.fromCharCode(i[f+n]);return e},writeASCII:function(i,f,r){for(var e=0;e<r.length;e++)i[f+e]=r.charCodeAt(e)},readBytes:function(i,f,r){for(var e=[],n=0;n<r;n++)e.push(i[f+n]);return e},pad:function(i){return i.length<2?"0".concat(i):i},readUTF8:function(i,f,r){for(var e,n="",c=0;c<r;c++)n+="%".concat(UPNG._bin.pad(i[f+c].toString(16)));try{e=decodeURIComponent(n)}catch{return UPNG._bin.readASCII(i,f,r)}return e}},UPNG._copyTile=function(t,i,f,r,e,n,c,a,l){for(var s=Math.min(i,e),m=Math.min(f,n),h=0,u=0,d=0;d<m;d++)for(var g=0;g<s;g++)if(c>=0&&a>=0?(h=d*i+g<<2,u=(a+d)*e+c+g<<2):(h=(-a+d)*i-c+g<<2,u=d*e+g<<2),l==0)r[u]=t[h],r[u+1]=t[h+1],r[u+2]=t[h+2],r[u+3]=t[h+3];else if(l==1){var p=t[h+3]*.00392156862745098,U=t[h]*p,I=t[h+1]*p,y=t[h+2]*p,w=r[u+3]*(1/255),F=r[u]*w,_=r[u+1]*w,v=r[u+2]*w,P=1-p,A=p+w*P,C=A==0?0:1/A;r[u+3]=255*A,r[u+0]=(U+F*P)*C,r[u+1]=(I+_*P)*C,r[u+2]=(y+v*P)*C}else if(l==2)p=t[h+3],U=t[h],I=t[h+1],y=t[h+2],w=r[u+3],F=r[u],_=r[u+1],v=r[u+2],p==w&&U==F&&I==_&&y==v?(r[u]=0,r[u+1]=0,r[u+2]=0,r[u+3]=0):(r[u]=U,r[u+1]=I,r[u+2]=y,r[u+3]=p);else if(l==3){if(p=t[h+3],U=t[h],I=t[h+1],y=t[h+2],w=r[u+3],F=r[u],_=r[u+1],v=r[u+2],p==w&&U==F&&I==_&&y==v)continue;if(p<220&&w>20)return!1}return!0},UPNG.encode=function(t,i,f,r,e,n,c){r==null&&(r=0),c==null&&(c=!1);var a=UPNG.encode.compress(t,i,f,r,[!1,!1,!1,0,c]);return UPNG.encode.compressPNG(a,-1),UPNG.encode._main(a,i,f,e,n)},UPNG.encodeLL=function(t,i,f,r,e,n,c,a){for(var l={ctype:0+(r==1?0:2)+(e==0?0:4),depth:n,frames:[]},s=(r+e)*n,m=s*i,h=0;h<t.length;h++)l.frames.push({rect:{x:0,y:0,width:i,height:f},img:new Uint8Array(t[h]),blend:0,dispose:1,bpp:Math.ceil(s/8),bpl:Math.ceil(m/8)});return UPNG.encode.compressPNG(l,0,!0),UPNG.encode._main(l,i,f,c,a)},UPNG.encode._main=function(t,i,f,r,e){e==null&&(e={});var n=UPNG.crc.crc,c=UPNG._bin.writeUint,a=UPNG._bin.writeUshort,l=UPNG._bin.writeASCII,s=8,m=t.frames.length>1,h=!1,u=33+(m?20:0);if(e.sRGB!=null&&(u+=13),e.pHYs!=null&&(u+=21),t.ctype==3){for(var d=t.plte.length,g=0;g<d;g++)t.plte[g]>>>24!=255&&(h=!0);u+=8+3*d+4+(h?8+1*d+4:0)}for(var p=0;p<t.frames.length;p++)m&&(u+=38),u+=(A=t.frames[p]).cimg.length+12,p!=0&&(u+=4);u+=12;var U=new Uint8Array(u),I=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)U[g]=I[g];if(c(U,s,13),l(U,s+=4,"IHDR"),c(U,s+=4,i),c(U,s+=4,f),U[s+=4]=t.depth,U[++s]=t.ctype,U[++s]=0,U[++s]=0,U[++s]=0,c(U,++s,n(U,s-17,17)),s+=4,e.sRGB!=null&&(c(U,s,1),l(U,s+=4,"sRGB"),U[s+=4]=e.sRGB,c(U,++s,n(U,s-5,5)),s+=4),e.pHYs!=null&&(c(U,s,9),l(U,s+=4,"pHYs"),c(U,s+=4,e.pHYs[0]),c(U,s+=4,e.pHYs[1]),U[s+=4]=e.pHYs[2],c(U,++s,n(U,s-13,13)),s+=4),m&&(c(U,s,8),l(U,s+=4,"acTL"),c(U,s+=4,t.frames.length),c(U,s+=4,e.loop!=null?e.loop:0),c(U,s+=4,n(U,s-12,12)),s+=4),t.ctype==3){for(c(U,s,3*(d=t.plte.length)),l(U,s+=4,"PLTE"),s+=4,g=0;g<d;g++){var y=3*g,w=t.plte[g],F=255&w,_=w>>>8&255,v=w>>>16&255;U[s+y+0]=F,U[s+y+1]=_,U[s+y+2]=v}if(c(U,s+=3*d,n(U,s-3*d-4,3*d+4)),s+=4,h){for(c(U,s,d),l(U,s+=4,"tRNS"),s+=4,g=0;g<d;g++)U[s+g]=t.plte[g]>>>24&255;c(U,s+=d,n(U,s-d-4,d+4)),s+=4}}var P=0;for(p=0;p<t.frames.length;p++){var A=t.frames[p];m&&(c(U,s,26),l(U,s+=4,"fcTL"),c(U,s+=4,P++),c(U,s+=4,A.rect.width),c(U,s+=4,A.rect.height),c(U,s+=4,A.rect.x),c(U,s+=4,A.rect.y),a(U,s+=4,r[p]),a(U,s+=2,1e3),U[s+=2]=A.dispose,U[++s]=A.blend,c(U,++s,n(U,s-30,30)),s+=4);var C=A.cimg;c(U,s,(d=C.length)+(p==0?0:4));var b=s+=4;l(U,s,p==0?"IDAT":"fdAT"),s+=4,p!=0&&(c(U,s,P++),s+=4),U.set(C,s),c(U,s+=d,n(U,b,s-b)),s+=4}return c(U,s,0),l(U,s+=4,"IEND"),c(U,s+=4,n(U,s-4,4)),s+=4,U.buffer},UPNG.encode.compressPNG=function(t,i,f){for(var r=0;r<t.frames.length;r++){var e=t.frames[r];e.rect.width;var n=e.rect.height,c=new Uint8Array(n*e.bpl+n);e.cimg=UPNG.encode._filterZero(e.img,n,e.bpp,e.bpl,c,i,f)}},UPNG.encode.compress=function(t,i,f,r,e){for(var n=e[0],c=e[1],a=e[2],l=e[3],s=e[4],m=6,h=8,u=255,d=0;d<t.length;d++)for(var g=new Uint8Array(t[d]),p=g.length,U=0;U<p;U+=4)u&=g[U+3];var I=u!=255,y=UPNG.encode.framize(t,i,f,n,c,a),w={},F=[],_=[];if(r!=0){var v=[];for(U=0;U<y.length;U++)v.push(y[U].img.buffer);var P=UPNG.encode.concatRGBA(v),A=UPNG.quantize(P,r),C=0,b=new Uint8Array(A.abuf);for(U=0;U<y.length;U++){var E=(Q=y[U].img).length;for(_.push(new Uint8Array(A.inds.buffer,C>>2,E>>2)),d=0;d<E;d+=4)Q[d]=b[C+d],Q[d+1]=b[C+d+1],Q[d+2]=b[C+d+2],Q[d+3]=b[C+d+3];C+=E}for(U=0;U<A.plte.length;U++)F.push(A.plte[U].est.rgba)}else for(d=0;d<y.length;d++){var G=y[d],B=new Uint32Array(G.img.buffer),M=G.rect.width,Z=(p=B.length,new Uint8Array(p));for(_.push(Z),U=0;U<p;U++){var R=B[U];if(U!=0&&R==B[U-1])Z[U]=Z[U-1];else if(U>M&&R==B[U-M])Z[U]=Z[U-M];else{var S=w[R];if(S==null&&(w[R]=S=F.length,F.push(R),F.length>=300))break;Z[U]=S}}}var O=F.length;for(O<=256&&s==0&&(h=O<=2?1:O<=4?2:O<=16?4:8,h=Math.max(h,l)),d=0;d<y.length;d++){(G=y[d]).rect.x,G.rect.y,M=G.rect.width;var x=G.rect.height,T=G.img;new Uint32Array(T.buffer);var D=4*M,L=4;if(O<=256&&s==0){D=Math.ceil(h*M/8);for(var k=new Uint8Array(D*x),V=_[d],q=0;q<x;q++){U=q*D;var j=q*M;if(h==8)for(var z=0;z<M;z++)k[U+z]=V[j+z];else if(h==4)for(z=0;z<M;z++)k[U+(z>>1)]|=V[j+z]<<4-4*(1&z);else if(h==2)for(z=0;z<M;z++)k[U+(z>>2)]|=V[j+z]<<6-2*(3&z);else if(h==1)for(z=0;z<M;z++)k[U+(z>>3)]|=V[j+z]<<7-1*(7&z)}T=k,m=3,L=1}else if(I==0&&y.length==1){k=new Uint8Array(M*x*3);var X=M*x;for(U=0;U<X;U++){var Q,$=4*U;k[Q=3*U]=T[$],k[Q+1]=T[$+1],k[Q+2]=T[$+2]}T=k,m=2,L=3,D=3*M}G.img=T,G.bpl=D,G.bpp=L}return{ctype:m,depth:h,plte:F,frames:y}},UPNG.encode.framize=function(t,i,f,r,e,n){for(var c=[],a=0;a<t.length;a++){var l,s=new Uint8Array(t[a]),m=new Uint32Array(s.buffer),h=0,u=0,d=i,g=f,p=r?1:0;if(a!=0){for(var U=n||r||a==1||c[a-2].dispose!=0?1:2,I=0,y=1e9,w=0;w<U;w++){for(var F=new Uint8Array(t[a-1-w]),_=new Uint32Array(t[a-1-w]),v=i,P=f,A=-1,C=-1,b=0;b<f;b++)for(var E=0;E<i;E++)m[O=b*i+E]!=_[O]&&(E<v&&(v=E),E>A&&(A=E),b<P&&(P=b),b>C&&(C=b));A==-1&&(v=P=A=C=0),e&&((1&v)==1&&v--,(1&P)==1&&P--);var G=(A-v+1)*(C-P+1);G<y&&(y=G,I=w,h=v,u=P,d=A-v+1,g=C-P+1)}F=new Uint8Array(t[a-1-I]),I==1&&(c[a-1].dispose=2),l=new Uint8Array(d*g*4),UPNG._copyTile(F,i,f,l,d,g,-h,-u,0),(p=UPNG._copyTile(s,i,f,l,d,g,-h,-u,3)?1:0)==1?UPNG.encode._prepareDiff(s,i,f,l,{x:h,y:u,width:d,height:g}):UPNG._copyTile(s,i,f,l,d,g,-h,-u,0)}else l=s.slice(0);c.push({rect:{x:h,y:u,width:d,height:g},img:l,blend:p,dispose:0})}if(r){for(a=0;a<c.length;a++)if((x=c[a]).blend!=1){var B=x.rect,M=c[a-1].rect,Z=Math.min(B.x,M.x),R=Math.min(B.y,M.y),S={x:Z,y:R,width:Math.max(B.x+B.width,M.x+M.width)-Z,height:Math.max(B.y+B.height,M.y+M.height)-R};c[a-1].dispose=1,a-1!=0&&UPNG.encode._updateFrame(t,i,f,c,a-1,S,e),UPNG.encode._updateFrame(t,i,f,c,a,S,e)}}if(t.length!=1)for(var O=0;O<c.length;O++){var x;(x=c[O]).rect.width*x.rect.height}return c},UPNG.encode._updateFrame=function(t,i,f,r,e,n,c){for(var a=Uint8Array,l=Uint32Array,s=new a(t[e-1]),m=new l(t[e-1]),h=e+1<t.length?new a(t[e+1]):null,u=new a(t[e]),d=new l(u.buffer),g=i,p=f,U=-1,I=-1,y=0;y<n.height;y++)for(var w=0;w<n.width;w++){var F=n.x+w,_=n.y+y,v=_*i+F,P=d[v];P==0||r[e-1].dispose==0&&m[v]==P&&(h==null||h[4*v+3]!=0)||(F<g&&(g=F),F>U&&(U=F),_<p&&(p=_),_>I&&(I=_))}U==-1&&(g=p=U=I=0),c&&((1&g)==1&&g--,(1&p)==1&&p--),n={x:g,y:p,width:U-g+1,height:I-p+1};var A=r[e];A.rect=n,A.blend=1,A.img=new Uint8Array(n.width*n.height*4),r[e-1].dispose==0?(UPNG._copyTile(s,i,f,A.img,n.width,n.height,-n.x,-n.y,0),UPNG.encode._prepareDiff(u,i,f,A.img,n)):UPNG._copyTile(u,i,f,A.img,n.width,n.height,-n.x,-n.y,0)},UPNG.encode._prepareDiff=function(t,i,f,r,e){UPNG._copyTile(t,i,f,r,e.width,e.height,-e.x,-e.y,2)},UPNG.encode._filterZero=function(t,i,f,r,e,n,c){var a,l=[],s=[0,1,2,3,4];n!=-1?s=[n]:(i*r>5e5||f==1)&&(s=[0]),c&&(a={level:0});for(var m,h=UZIP,u=0;u<s.length;u++){for(var d=0;d<i;d++)UPNG.encode._filterLine(e,t,d,r,f,s[u]);l.push(h.deflate(e,a))}var g=1e9;for(u=0;u<l.length;u++)l[u].length<g&&(m=u,g=l[u].length);return l[m]},UPNG.encode._filterLine=function(t,i,f,r,e,n){var c=f*r,a=c+f,l=UPNG.decode._paeth;if(t[a]=n,a++,n==0)if(r<500)for(var s=0;s<r;s++)t[a+s]=i[c+s];else t.set(new Uint8Array(i.buffer,c,r),a);else if(n==1){for(s=0;s<e;s++)t[a+s]=i[c+s];for(s=e;s<r;s++)t[a+s]=i[c+s]-i[c+s-e]+256&255}else if(f==0){for(s=0;s<e;s++)t[a+s]=i[c+s];if(n==2)for(s=e;s<r;s++)t[a+s]=i[c+s];if(n==3)for(s=e;s<r;s++)t[a+s]=i[c+s]-(i[c+s-e]>>1)+256&255;if(n==4)for(s=e;s<r;s++)t[a+s]=i[c+s]-l(i[c+s-e],0,0)+256&255}else{if(n==2)for(s=0;s<r;s++)t[a+s]=i[c+s]+256-i[c+s-r]&255;if(n==3){for(s=0;s<e;s++)t[a+s]=i[c+s]+256-(i[c+s-r]>>1)&255;for(s=e;s<r;s++)t[a+s]=i[c+s]+256-(i[c+s-r]+i[c+s-e]>>1)&255}if(n==4){for(s=0;s<e;s++)t[a+s]=i[c+s]+256-l(0,i[c+s-r],0)&255;for(s=e;s<r;s++)t[a+s]=i[c+s]+256-l(i[c+s-e],i[c+s-r],i[c+s-e-r])&255}}},UPNG.crc={table:function(){for(var t=new Uint32Array(256),i=0;i<256;i++){for(var f=i,r=0;r<8;r++)1&f?f=3988292384^f>>>1:f>>>=1;t[i]=f}return t}(),update:function(i,f,r,e){for(var n=0;n<e;n++)i=UPNG.crc.table[255&(i^f[r+n])]^i>>>8;return i},crc:function(i,f,r){return 4294967295^UPNG.crc.update(4294967295,i,f,r)}},UPNG.quantize=function(t,i){var f,r=new Uint8Array(t),e=r.slice(0),n=new Uint32Array(e.buffer),c=UPNG.quantize.getKDtree(e,i),a=c[0],l=c[1],s=UPNG.quantize.planeDst,m=r,h=n,u=m.length,d=new Uint8Array(r.length>>2);if(r.length<2e7)for(var g=0;g<u;g+=4){var p=m[g]*.00392156862745098,U=m[g+1]*(1/255),I=m[g+2]*(1/255),y=m[g+3]*(1/255);f=UPNG.quantize.getNearest(a,p,U,I,y),d[g>>2]=f.ind,h[g>>2]=f.est.rgba}else for(g=0;g<u;g+=4){for(p=m[g]*(1/255),U=m[g+1]*(1/255),I=m[g+2]*(1/255),y=m[g+3]*(1/255),f=a;f.left;)f=s(f.est,p,U,I,y)<=0?f.left:f.right;d[g>>2]=f.ind,h[g>>2]=f.est.rgba}return{abuf:e.buffer,inds:d,plte:l}},UPNG.quantize.getKDtree=function(t,i,f){f==null&&(f=1e-4);var r=new Uint32Array(t.buffer),e={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};e.bst=UPNG.quantize.stats(t,e.i0,e.i1),e.est=UPNG.quantize.estats(e.bst);for(var n=[e];n.length<i;){for(var c=0,a=0,l=0;l<n.length;l++)n[l].est.L>c&&(c=n[l].est.L,a=l);if(c<f)break;var s=n[a],m=UPNG.quantize.splitPixels(t,r,s.i0,s.i1,s.est.e,s.est.eMq255);if(s.i0>=m||s.i1<=m)s.est.L=0;else{var h={i0:s.i0,i1:m,bst:null,est:null,tdst:0,left:null,right:null};h.bst=UPNG.quantize.stats(t,h.i0,h.i1),h.est=UPNG.quantize.estats(h.bst);var u={i0:m,i1:s.i1,bst:null,est:null,tdst:0,left:null,right:null};for(u.bst={R:[],m:[],N:s.bst.N-h.bst.N},l=0;l<16;l++)u.bst.R[l]=s.bst.R[l]-h.bst.R[l];for(l=0;l<4;l++)u.bst.m[l]=s.bst.m[l]-h.bst.m[l];u.est=UPNG.quantize.estats(u.bst),s.left=h,s.right=u,n[a]=h,n.push(u)}}for(n.sort(function(d,g){return g.bst.N-d.bst.N}),l=0;l<n.length;l++)n[l].ind=l;return[e,n]},UPNG.quantize.getNearest=function(t,i,f,r,e){if(t.left==null)return t.tdst=UPNG.quantize.dist(t.est.q,i,f,r,e),t;var n=UPNG.quantize.planeDst(t.est,i,f,r,e),c=t.left,a=t.right;n>0&&(c=t.right,a=t.left);var l=UPNG.quantize.getNearest(c,i,f,r,e);if(l.tdst<=n*n)return l;var s=UPNG.quantize.getNearest(a,i,f,r,e);return s.tdst<l.tdst?s:l},UPNG.quantize.planeDst=function(t,i,f,r,e){var n=t.e;return n[0]*i+n[1]*f+n[2]*r+n[3]*e-t.eMq},UPNG.quantize.dist=function(t,i,f,r,e){var n=i-t[0],c=f-t[1],a=r-t[2],l=e-t[3];return n*n+c*c+a*a+l*l},UPNG.quantize.splitPixels=function(t,i,f,r,e,n){var c=UPNG.quantize.vecDot;for(r-=4;f<r;){for(;c(t,f,e)<=n;)f+=4;for(;c(t,r,e)>n;)r-=4;if(f>=r)break;var a=i[f>>2];i[f>>2]=i[r>>2],i[r>>2]=a,f+=4,r-=4}for(;c(t,f,e)>n;)f-=4;return f+4},UPNG.quantize.vecDot=function(t,i,f){return t[i]*f[0]+t[i+1]*f[1]+t[i+2]*f[2]+t[i+3]*f[3]},UPNG.quantize.stats=function(t,i,f){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=[0,0,0,0],n=f-i>>2,c=i;c<f;c+=4){var a=t[c]*.00392156862745098,l=t[c+1]*(1/255),s=t[c+2]*(1/255),m=t[c+3]*(1/255);e[0]+=a,e[1]+=l,e[2]+=s,e[3]+=m,r[0]+=a*a,r[1]+=a*l,r[2]+=a*s,r[3]+=a*m,r[5]+=l*l,r[6]+=l*s,r[7]+=l*m,r[10]+=s*s,r[11]+=s*m,r[15]+=m*m}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:e,N:n}},UPNG.quantize.estats=function(t){var i=t.R,f=t.m,r=t.N,e=f[0],n=f[1],c=f[2],a=f[3],l=r==0?0:1/r,s=[i[0]-e*e*l,i[1]-e*n*l,i[2]-e*c*l,i[3]-e*a*l,i[4]-n*e*l,i[5]-n*n*l,i[6]-n*c*l,i[7]-n*a*l,i[8]-c*e*l,i[9]-c*n*l,i[10]-c*c*l,i[11]-c*a*l,i[12]-a*e*l,i[13]-a*n*l,i[14]-a*c*l,i[15]-a*a*l],m=s,h=UPNG.M4,u=[Math.random(),Math.random(),Math.random(),Math.random()],d=0,g=0;if(r!=0)for(var p=0;p<16&&(u=h.multVec(m,u),g=Math.sqrt(h.dot(u,u)),u=h.sml(1/g,u),!(p!=0&&Math.abs(g-d)<1e-9));p++)d=g;var U=[e*l,n*l,c*l,a*l];return{Cov:s,q:U,e:u,L:d,eMq255:h.dot(h.sml(255,U),u),eMq:h.dot(u,U),rgba:(Math.round(255*U[3])<<24|Math.round(255*U[2])<<16|Math.round(255*U[1])<<8|Math.round(255*U[0])<<0)>>>0}},UPNG.M4={multVec:function(i,f){return[i[0]*f[0]+i[1]*f[1]+i[2]*f[2]+i[3]*f[3],i[4]*f[0]+i[5]*f[1]+i[6]*f[2]+i[7]*f[3],i[8]*f[0]+i[9]*f[1]+i[10]*f[2]+i[11]*f[3],i[12]*f[0]+i[13]*f[1]+i[14]*f[2]+i[15]*f[3]]},dot:function(i,f){return i[0]*f[0]+i[1]*f[1]+i[2]*f[2]+i[3]*f[3]},sml:function(i,f){return[i*f[0],i*f[1],i*f[2],i*f[3]]}},UPNG.encode.concatRGBA=function(t){for(var i=0,f=0;f<t.length;f++)i+=t[f].byteLength;var r=new Uint8Array(i),e=0;for(f=0;f<t.length;f++){for(var n=new Uint8Array(t[f]),c=n.length,a=0;a<c;a+=4){var l=n[a],s=n[a+1],m=n[a+2],h=n[a+3];h==0&&(l=s=m=0),r[e+a]=l,r[e+a+1]=s,r[e+a+2]=m,r[e+a+3]=h}e+=c}return r.buffer};var BROWSER_NAME={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",MOBILE_SAFARI:"MOBILE_SAFARI",ETC:"ETC"},_BROWSER_NAME$CHROME$,MAX_CANVAS_SIZE=(_BROWSER_NAME$CHROME$={},_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.CHROME,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.FIREFOX,11180),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.DESKTOP_SAFARI,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.IE,8192),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.MOBILE_SAFARI,4096),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.ETC,8192),_BROWSER_NAME$CHROME$),isBrowser=typeof window<"u",moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||window.File!==void 0&&File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||window.FileReader!==void 0&&FileReader);function getFilefromDataUrl(t,i){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Date.now();return new Promise(function(r){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],c=globalThis.atob(e[1]),a=c.length,l=new Uint8Array(a);a--;)l[a]=c.charCodeAt(a);var s=new Blob([l],{type:n});s.name=i,s.lastModified=f,r(s)})}function getDataUrlFromFile(t){return new Promise(function(i,f){var r=new CustomFileReader;r.onload=function(){return i(r.result)},r.onerror=function(e){return f(e)},r.readAsDataURL(t)})}function loadImage(t){return new Promise(function(i,f){var r=new Image;r.onload=function(){return i(r)},r.onerror=function(e){return f(e)},r.src=t})}function getBrowserName(){if(getBrowserName.cachedResult!==void 0)return getBrowserName.cachedResult;var t=BROWSER_NAME.ETC,i=navigator.userAgent;return/Chrom(e|ium)/i.test(i)?t=BROWSER_NAME.CHROME:/iP(ad|od|hone)/i.test(i)&&/WebKit/i.test(i)&&!/(CriOS|FxiOS|OPiOS|mercury)/i.test(i)?t=BROWSER_NAME.MOBILE_SAFARI:/Safari/i.test(i)?t=BROWSER_NAME.DESKTOP_SAFARI:/Firefox/i.test(i)?t=BROWSER_NAME.FIREFOX:(/MSIE/i.test(i)||document.documentMode)&&(t=BROWSER_NAME.IE),getBrowserName.cachedResult=t,getBrowserName.cachedResult}function approximateBelowMaximumCanvasSizeOfBrowser(t,i){for(var f=getBrowserName(),r=MAX_CANVAS_SIZE[f],e=t,n=i,c=e*n,a=e>n?n/e:e/n;c>r*r;){var l=(r+e)/2,s=(r+n)/2;l<s?(n=s,e=s*a):(n=l*a,e=l),c=e*n}return{width:e,height:n}}function getNewCanvasAndCtx(t,i){var f,r;try{if((r=(f=new OffscreenCanvas(t,i)).getContext("2d"))===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=(f=document.createElement("canvas")).getContext("2d")}return f.width=t,f.height=i,[f,r]}function drawImageInCanvas(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,f=approximateBelowMaximumCanvasSizeOfBrowser(t.width,t.height),r=f.width,e=f.height,n=getNewCanvasAndCtx(r,e),c=_slicedToArray(n,2),a=c[0],l=c[1];return i&&/jpe?g/.test(i)&&(l.fillStyle="white",l.fillRect(0,0,a.width,a.height)),l.drawImage(t,0,0,a.width,a.height),a}function isIOS(){return isIOS.cachedResult!==void 0||(isIOS.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),isIOS.cachedResult}function drawFileInCanvas(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(f,r){var e,n,c=function(){try{return n=drawImageInCanvas(e,i.fileType||t.type),f([e,n])}catch(s){return r(s)}},a=function(s){try{var m=function(u){try{throw u}catch(d){return r(d)}};try{return getDataUrlFromFile(t).then(function(h){try{return loadImage(h).then(function(u){try{return e=u,function(){try{return c()}catch(g){return r(g)}}()}catch(d){return m(d)}},m)}catch(u){return m(u)}},m)}catch(h){m(h)}}catch(h){return r(h)}};try{if(isIOS()||[BROWSER_NAME.DESKTOP_SAFARI,BROWSER_NAME.MOBILE_SAFARI].includes(getBrowserName()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return e=l,c()}catch{return a()}},a)}catch{a()}})}function canvasToFile(t,i,f,r){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;return new Promise(function(n,c){var a,l,s;if(i==="image/png")return l=t.getContext("2d").getImageData(0,0,t.width,t.height).data,s=UPNG.encode([l],t.width,t.height,256*e),(a=new Blob([s],{type:i})).name=f,a.lastModified=r,m.call(this);{let h=function(){return m.call(this)};return typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas?t.convertToBlob({type:i,quality:e}).then(function(u){try{return(a=u).name=f,a.lastModified=r,h.call(this)}catch(d){return c(d)}}.bind(this),c):getFilefromDataUrl(t.toDataURL(i,e),f,r).then(function(u){try{return a=u,h.call(this)}catch(d){return c(d)}}.bind(this),c)}function m(){return n(a)}})}function cleanupCanvasMemory(t){t.width=0,t.height=0}function isAutoOrientationInBrowser(){return new Promise(function(t,i){var f,r,e,n;return isAutoOrientationInBrowser.cachedResult!==void 0?t(isAutoOrientationInBrowser.cachedResult):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return drawFileInCanvas(f=c).then(function(a){try{return canvasToFile(r=a[1],f.type,f.name,f.lastModified).then(function(l){try{return e=l,cleanupCanvasMemory(r),drawFileInCanvas(e).then(function(s){try{return n=s[0],isAutoOrientationInBrowser.cachedResult=n.width===1&&n.height===2,t(isAutoOrientationInBrowser.cachedResult)}catch(m){return i(m)}},i)}catch(s){return i(s)}},i)}catch(l){return i(l)}},i)}catch(a){return i(a)}},i)})}function getExifOrientation(t){return new Promise(function(i,f){var r=new CustomFileReader;r.onload=function(e){var n=new DataView(e.target.result);if(n.getUint16(0,!1)!=65496)return i(-2);for(var c=n.byteLength,a=2;a<c;){if(n.getUint16(a+2,!1)<=8)return i(-1);var l=n.getUint16(a,!1);if(a+=2,l==65505){if(n.getUint32(a+=2,!1)!=1165519206)return i(-1);var s=n.getUint16(a+=6,!1)==18761;a+=n.getUint32(a+4,s);var m=n.getUint16(a,s);a+=2;for(var h=0;h<m;h++)if(n.getUint16(a+12*h,s)==274)return i(n.getUint16(a+12*h+8,s))}else{if((65280&l)!=65280)break;a+=n.getUint16(a,!1)}}return i(-1)},r.onerror=function(e){return f(e)},r.readAsArrayBuffer(t)})}function handleMaxWidthOrHeight(t,i){var f,r=t.width,e=t.height,n=i.maxWidthOrHeight,c=t;if(isFinite(n)&&(r>n||e>n)){var a=_slicedToArray(getNewCanvasAndCtx(r,e),2);c=a[0],f=a[1],r>e?(c.width=n,c.height=e/r*n):(c.width=r/e*n,c.height=n),f.drawImage(t,0,0,c.width,c.height),cleanupCanvasMemory(t)}return c}function followExifOrientation(t,i){var f=t.width,r=t.height,e=_slicedToArray(getNewCanvasAndCtx(f,r),2),n=e[0],c=e[1];switch(i>4&&i<9?(n.width=r,n.height=f):(n.width=f,n.height=r),i){case 2:c.transform(-1,0,0,1,f,0);break;case 3:c.transform(-1,0,0,-1,f,r);break;case 4:c.transform(1,0,0,-1,0,r);break;case 5:c.transform(0,1,1,0,0,0);break;case 6:c.transform(0,1,-1,0,r,0);break;case 7:c.transform(0,-1,-1,0,r,f);break;case 8:c.transform(0,-1,1,0,0,f)}return c.drawImage(t,0,0,f,r),cleanupCanvasMemory(t),n}function compress(t,i){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return new Promise(function(r,e){var n,c,a,l,s,m,h,u,d,g,p,U,I,y,w,F,_,v,P;function A(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;if(i.signal&&i.signal.aborted)throw i.signal.reason;n+=b,i.onProgress(Math.min(n,100))}function C(b){if(i.signal&&i.signal.aborted)throw i.signal.reason;n=Math.min(Math.max(b,n),100),i.onProgress(n)}return n=f,c=i.maxIteration||10,a=1024*i.maxSizeMB*1024,A(),drawFileInCanvas(t,i).then(function(b){try{var E=_slicedToArray(b,2);return l=E[1],A(),s=handleMaxWidthOrHeight(l,i),A(),new Promise(function(G,B){var M;if(!(M=i.exifOrientation))return getExifOrientation(t).then(function(R){try{return M=R,Z.call(this)}catch(S){return B(S)}}.bind(this),B);function Z(){return G(M)}return Z.call(this)}).then(function(G){try{return m=G,A(),isAutoOrientationInBrowser().then(function(B){try{return h=B?s:followExifOrientation(s,m),A(),u=i.initialQuality||1,d=i.fileType||t.type,canvasToFile(h,d,t.name,t.lastModified,u).then(function(M){try{{let R=function(){if(c--&&(w>a||w>I)){var O,x,T=_slicedToArray(getNewCanvasAndCtx(O=P?.95*v.width:v.width,x=P?.95*v.height:v.height),2);return _=T[0],T[1].drawImage(v,0,0,O,x),u*=.95,canvasToFile(_,d,t.name,t.lastModified,u).then(function(D){try{return F=D,cleanupCanvasMemory(v),v=_,w=F.size,C(Math.min(99,Math.floor((y-w)/(y-a)*100))),R}catch(L){return e(L)}},e)}return[1]},S=function(){return cleanupCanvasMemory(v),cleanupCanvasMemory(_),cleanupCanvasMemory(s),cleanupCanvasMemory(h),cleanupCanvasMemory(l),C(100),r(F)};if(g=M,A(),p=g.size>a,U=g.size>t.size,!p&&!U)return C(100),r(g);var Z;return I=t.size,y=g.size,w=y,v=h,P=!i.alwaysKeepResolution&&p,(Z=function(O){for(;O;){if(O.then)return void O.then(Z,e);try{if(O.pop){if(O.length)return O.pop()?S.call(this):O;O=R}else O=O.call(this)}catch(x){return e(x)}}}.bind(this))(R)}}catch(R){return e(R)}}.bind(this),e)}catch(M){return e(M)}}.bind(this),e)}catch(B){return e(B)}}.bind(this),e)}catch(G){return e(G)}}.bind(this),e)})}var cnt=0,imageCompressionLibUrl,worker;function createWorker(t){var i=[];return typeof t=="function"?i.push("(".concat(t,")()")):i.push(t),new Worker(URL.createObjectURL(new Blob(i)))}function createSourceObject(t){return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}function stringify(t){return JSON.stringify(t,function(i,f){return typeof f=="function"?"BIC_FN:::(function () { return ".concat(f.toString()," })()"):f})}function parse(o){if(typeof o=="string")return o;var result={};return Object.entries(o).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(typeof value=="string"&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(t){throw t}else result[key]=parse(value)}),result}function generateLib(){return createSourceObject(`
    // reconstruct library
    function imageCompression (){return (`.concat(imageCompression,`).apply(null, arguments)}

    imageCompression.getDataUrlFromFile = `).concat(imageCompression.getDataUrlFromFile,`
    imageCompression.getFilefromDataUrl = `).concat(imageCompression.getFilefromDataUrl,`
    imageCompression.loadImage = `).concat(imageCompression.loadImage,`
    imageCompression.drawImageInCanvas = `).concat(imageCompression.drawImageInCanvas,`
    imageCompression.drawFileInCanvas = `).concat(imageCompression.drawFileInCanvas,`
    imageCompression.canvasToFile = `).concat(imageCompression.canvasToFile,`
    imageCompression.getExifOrientation = `).concat(imageCompression.getExifOrientation,`
    imageCompression.handleMaxWidthOrHeight = `).concat(imageCompression.handleMaxWidthOrHeight,`
    imageCompression.followExifOrientation = `).concat(imageCompression.followExifOrientation,`
    imageCompression.cleanupCanvasMemory = `).concat(imageCompression.cleanupCanvasMemory,`
    imageCompression.isAutoOrientationInBrowser = `).concat(imageCompression.isAutoOrientationInBrowser,`
    imageCompression.approximateBelowMaximumCanvasSizeOfBrowser = `).concat(imageCompression.approximateBelowMaximumCanvasSizeOfBrowser,`
    imageCompression.getBrowserName = `).concat(imageCompression.getBrowserName,`

    // functions / objects
    getDataUrlFromFile = imageCompression.getDataUrlFromFile
    getFilefromDataUrl = imageCompression.getFilefromDataUrl
    loadImage = imageCompression.loadImage
    drawImageInCanvas = imageCompression.drawImageInCanvas
    drawFileInCanvas = imageCompression.drawFileInCanvas
    canvasToFile = imageCompression.canvasToFile
    getExifOrientation = imageCompression.getExifOrientation
    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight
    followExifOrientation = imageCompression.followExifOrientation
    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory
    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser
    approximateBelowMaximumCanvasSizeOfBrowser = imageCompression.approximateBelowMaximumCanvasSizeOfBrowser
    getBrowserName = imageCompression.getBrowserName
    isIOS = `).concat(isIOS,`
    
    getNewCanvasAndCtx = `).concat(getNewCanvasAndCtx,`
    CustomFileReader = FileReader
    CustomFile = File
    MAX_CANVAS_SIZE = `).concat(JSON.stringify(MAX_CANVAS_SIZE),`
    BROWSER_NAME = `).concat(JSON.stringify(BROWSER_NAME),`
    function compress (){return (`).concat(compress,`).apply(null, arguments)}

    // core-js
    function _slicedToArray(arr, n) { return arr }
    function _typeof(a) { return typeof a }
    function _objectSpread2(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i] != null ? arguments[i] : {};
  
        Object.assign(target, source)
      }
  
      return target;
    }

    // Libraries
    const parse = `).concat(parse,`
    const UPNG = {}
    UPNG.toRGBA8 = `).concat(UPNG.toRGBA8,`
    UPNG.toRGBA8.decodeImage = `).concat(UPNG.toRGBA8.decodeImage,`
    UPNG.decode = `).concat(UPNG.decode,`
    UPNG.decode._decompress = `).concat(UPNG.decode._decompress,`
    UPNG.decode._inflate = `).concat(UPNG.decode._inflate,`
    UPNG.decode._readInterlace = `).concat(UPNG.decode._readInterlace,`
    UPNG.decode._getBPP = `).concat(UPNG.decode._getBPP,` 
    UPNG.decode._filterZero = `).concat(UPNG.decode._filterZero,`
    UPNG.decode._paeth = `).concat(UPNG.decode._paeth,`
    UPNG.decode._IHDR = `).concat(UPNG.decode._IHDR,`
    UPNG._bin = parse(`).concat(stringify(UPNG._bin),`)
    UPNG._copyTile = `).concat(UPNG._copyTile,`
    UPNG.encode = `).concat(UPNG.encode,`
    UPNG.encodeLL = `).concat(UPNG.encodeLL,` 
    UPNG.encode._main = `).concat(UPNG.encode._main,`
    UPNG.encode.compressPNG = `).concat(UPNG.encode.compressPNG,` 
    UPNG.encode.compress = `).concat(UPNG.encode.compress,`
    UPNG.encode.framize = `).concat(UPNG.encode.framize,` 
    UPNG.encode._updateFrame = `).concat(UPNG.encode._updateFrame,` 
    UPNG.encode._prepareDiff = `).concat(UPNG.encode._prepareDiff,` 
    UPNG.encode._filterZero = `).concat(UPNG.encode._filterZero,` 
    UPNG.encode._filterLine = `).concat(UPNG.encode._filterLine,`
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.crc = parse(`).concat(stringify(UPNG.crc),`)
    UPNG.crc.table = ( function() {
    var tab = new Uint32Array(256);
    for (var n=0; n<256; n++) {
      var c = n;
      for (var k=0; k<8; k++) {
        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
        else        c = c >>> 1;
      }
      tab[n] = c;  }
    return tab;  })()
    UPNG.quantize = `).concat(UPNG.quantize,` 
    UPNG.quantize.getKDtree = `).concat(UPNG.quantize.getKDtree,` 
    UPNG.quantize.getNearest = `).concat(UPNG.quantize.getNearest,` 
    UPNG.quantize.planeDst = `).concat(UPNG.quantize.planeDst,` 
    UPNG.quantize.dist = `).concat(UPNG.quantize.dist,`     
    UPNG.quantize.splitPixels = `).concat(UPNG.quantize.splitPixels,` 
    UPNG.quantize.vecDot = `).concat(UPNG.quantize.vecDot,` 
    UPNG.quantize.stats = `).concat(UPNG.quantize.stats,` 
    UPNG.quantize.estats = `).concat(UPNG.quantize.estats,`
    UPNG.M4 = parse(`).concat(stringify(UPNG.M4),`)
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.inflateRaw=function(){
    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;
      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;
      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);
        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;
        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;
        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;
                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;
        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);
        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;
        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);
        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};
      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};
      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;
        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);
          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;
        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};
      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;
        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];
          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);
        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;
                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};
      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};
      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};
      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;
        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();
      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;
        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;
        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];
        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);
        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);
        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()
    
    const UZIP = {}
    UZIP["parse"] = `).concat(UZIP_1.parse,`
    UZIP._readLocal = `).concat(UZIP_1._readLocal,`
    UZIP.inflateRaw = `).concat(UZIP_1.inflateRaw,`
    UZIP.inflate = `).concat(UZIP_1.inflate,`
    UZIP.deflate = `).concat(UZIP_1.deflate,`
    UZIP.deflateRaw = `).concat(UZIP_1.deflateRaw,`
    UZIP.encode = `).concat(UZIP_1.encode,`
    UZIP._noNeed = `).concat(UZIP_1._noNeed,`
    UZIP._writeHeader = `).concat(UZIP_1._writeHeader,`
    UZIP.crc = parse(`).concat(stringify(UZIP_1.crc),`)
    UZIP.crc.table = ( function() {
      var tab = new Uint32Array(256);
      for (var n=0; n<256; n++) {
        var c = n;
        for (var k=0; k<8; k++) {
          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
          else        c = c >>> 1;
        }
        tab[n] = c;  }
      return tab;  })()
    
    UZIP.adler = `).concat(UZIP_1.adler,`
    UZIP.bin = parse(`).concat(stringify(UZIP_1.bin),`)
    UZIP.F = {}
    UZIP.F.deflateRaw = `).concat(UZIP_1.F.deflateRaw,`
    UZIP.F._bestMatch = `).concat(UZIP_1.F._bestMatch,`
    UZIP.F._howLong = `).concat(UZIP_1.F._howLong,`
    UZIP.F._hash = `).concat(UZIP_1.F._hash,`
    UZIP.saved = `).concat(UZIP_1.saved,`
    UZIP.F._writeBlock = `).concat(UZIP_1.F._writeBlock,`
    UZIP.F._copyExact = `).concat(UZIP_1.F._copyExact,`
    UZIP.F.getTrees = `).concat(UZIP_1.F.getTrees,`
    UZIP.F.getSecond = `).concat(UZIP_1.F.getSecond,`
    UZIP.F.nonZero = `).concat(UZIP_1.F.nonZero,`
    UZIP.F.contSize = `).concat(UZIP_1.F.contSize,`
    UZIP.F._codeTiny = `).concat(UZIP_1.F._codeTiny,` 
    UZIP.F._lenCodes = `).concat(UZIP_1.F._lenCodes,` 
    UZIP.F._hufTree = `).concat(UZIP_1.F._hufTree,` 
    UZIP.F.setDepth = `).concat(UZIP_1.F.setDepth,` 
    UZIP.F.restrictDepth = `).concat(UZIP_1.F.restrictDepth,`
    UZIP.F._goodIndex = `).concat(UZIP_1.F._goodIndex,` 
    UZIP.F._writeLit = `).concat(UZIP_1.F._writeLit,` 
    UZIP.F.inflate = `).concat(UZIP_1.F.inflate,` 
    UZIP.F._check = `).concat(UZIP_1.F._check,` 
    UZIP.F._decodeTiny = `).concat(UZIP_1.F._decodeTiny,` 
    UZIP.F._copyOut = `).concat(UZIP_1.F._copyOut,` 
    UZIP.F.makeCodes = `).concat(UZIP_1.F.makeCodes,` 
    UZIP.F.codes2map = `).concat(UZIP_1.F.codes2map,` 
    UZIP.F.revCodes = `).concat(UZIP_1.F.revCodes,` 

    // used only in deflate
    UZIP.F._putsE = `).concat(UZIP_1.F._putsE,`
    UZIP.F._putsF = `).concat(UZIP_1.F._putsF,`
  
    UZIP.F._bitsE = `).concat(UZIP_1.F._bitsE,`
    UZIP.F._bitsF = `).concat(UZIP_1.F._bitsF,`

    UZIP.F._get17 = `).concat(UZIP_1.F._get17,`
    UZIP.F._get25 = `).concat(UZIP_1.F._get25,`
    UZIP.F.U = function(){
      var u16=Uint16Array, u32=Uint32Array;
      return {
        next_code : new u16(16),
        bl_count  : new u16(16),
        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],
        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],
        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],
        ldef : new u16(32),
        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],
        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],
        ddef : new u32(32),
        flmap: new u16(  512),  fltree: [],
        fdmap: new u16(   32),  fdtree: [],
        lmap : new u16(32768),  ltree : [],  ttree:[],
        dmap : new u16(32768),  dtree : [],
        imap : new u16(  512),  itree : [],
        //rev9 : new u16(  512)
        rev15: new u16(1<<15),
        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),
        lits : new u32(15000),
        strt : new u16(1<<16),
        prev : new u16(1<<15)
      };
    } ();

    (function(){
      var U = UZIP.F.U;
      var len = 1<<15;
      for(var i=0; i<len; i++) {
        var x = i;
        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));
        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));
        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));
        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));
        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;
      }
  
      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }
  
      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }
  
      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);
      /*
        var i = 0;
        for(; i<=143; i++) U.fltree.push(0,8);
        for(; i<=255; i++) U.fltree.push(0,9);
        for(; i<=279; i++) U.fltree.push(0,7);
        for(; i<=287; i++) U.fltree.push(0,8);
        */
      UZIP.F.makeCodes(U.fltree, 9);
      UZIP.F.codes2map(U.fltree, 9, U.flmap);
      UZIP.F.revCodes (U.fltree, 9)
  
      pushV(U.fdtree,32,5);
      //for(i=0;i<32; i++) U.fdtree.push(0,5);
      UZIP.F.makeCodes(U.fdtree, 5);
      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);
      UZIP.F.revCodes (U.fdtree, 5)
  
      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);
      /*
        for(var i=0; i< 19; i++) U.itree.push(0,0);
        for(var i=0; i<286; i++) U.ltree.push(0,0);
        for(var i=0; i< 30; i++) U.dtree.push(0,0);
        for(var i=0; i<320; i++) U.ttree.push(0,0);
        */
    })()
    `))}function generateWorkerScript(){return createWorker(`
    let scriptImported = false
    self.addEventListener('message', async (e) => {
      const { file, id, imageCompressionLibUrl, options } = e.data
      options.onProgress = (progress) => self.postMessage({ progress, id })
      try {
        if (!scriptImported) {
          // console.log('[worker] importScripts', imageCompressionLibUrl)
          self.importScripts(imageCompressionLibUrl)
          scriptImported = true
        }
        // console.log('[worker] self', self)
        const compressedFile = await imageCompression(file, options)
        self.postMessage({ file: compressedFile, id })
      } catch (e) {
        // console.error('[worker] error', e)
        self.postMessage({ error: e.message + '\\n' + e.stack, id })
      }
    })
  `)}function compressOnWebWorker(t,i){return new Promise(function(f,r){var e=cnt+=1;imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",function n(c){if(c.data.id===e){if(i.signal&&i.signal.aborted)return;if(c.data.progress!==void 0)return void i.onProgress(c.data.progress);worker.removeEventListener("message",n),c.data.error&&r(new Error(c.data.error)),f(c.data.file)}}),worker.addEventListener("error",r),i.signal&&i.signal.addEventListener("abort",function(){worker.terminate(),r(i.signal.reason)}),worker.postMessage({file:t,id:e,imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},i),{},{onProgress:void 0,signal:void 0})})})}function imageCompression(t,i){return new Promise(function(f,r){var e,n,c,a,l,s;if(e=_objectSpread2({},i),c=0,a=e.onProgress,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=function(d){c=d,typeof a=="function"&&a(c)},!(t instanceof Blob||t instanceof CustomFile))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(s=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||s)return compress(t,e).then(function(d){try{return n=d,u.call(this)}catch(g){return r(g)}}.bind(this),r);var m=function(){try{return u.call(this)}catch(d){return r(d)}}.bind(this),h=function(g){try{return compress(t,e).then(function(p){try{return n=p,m()}catch(U){return r(U)}},r)}catch(p){return r(p)}};try{return compressOnWebWorker(t,e).then(function(d){try{return n=d,m()}catch{return h()}},h)}catch{h()}function u(){try{n.name=t.name,n.lastModified=t.lastModified}catch{}return f(n)}})}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.approximateBelowMaximumCanvasSizeOfBrowser=approximateBelowMaximumCanvasSizeOfBrowser,imageCompression.getBrowserName=getBrowserName,imageCompression.version="2.0.0";export{createBroadcast as c,imageCompression as i};
